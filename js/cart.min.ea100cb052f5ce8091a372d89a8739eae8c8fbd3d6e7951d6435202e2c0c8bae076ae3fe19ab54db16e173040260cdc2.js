async function getCatalog(){return await(await fetch("/catalog.json")).json()}async function addToCart(e){var t,n=await getCatalog();console.log(n),t=JSON.parse(localStorage.getItem("cart"))||{},e in n&&(t[e]?t[e].quantity+=1:t[e]={quantity:1},localStorage.setItem("cart",JSON.stringify(t)))}function clearCart(){localStorage.removeItem("cart")}async function displayCart(){var e,t,s,o,i,r,c,n=await getCatalog(),a=document.getElementById("cart-items");if(a!=null){a.innerHTML="",r=0,o=JSON.parse(localStorage.getItem("cart"))||{};for(e in o)Object.hasOwn(o,e)&&e in n&&(i=o[e],t=document.createElement("div"),t.classList.add("cart-item"),t.innerHTML=e+": "+i.quantity+" x ",s=n[e].price,"discountedPrice"in n[e]&&(s=n[e].discountedPrice,t.innerHTML+='<span class="strikethrough">'+n[e].price+"Ft</span> "),t.innerHTML+=s+"Ft = <strong>"+i.quantity*s+"Ft</strong>",a.appendChild(t),r+=i.quantity*s);c=document.getElementById("final-price"),c.innerHTML=r+"Ft"}else console.log("displayCart: Can't display cart, no container.")}window.addEventListener("DOMContentLoaded",displayCart),window.addEventListener("DOMContentLoaded",function(){document.getElementById("payment-form").addEventListener("submit",clearCart)})